%% source:
%% https://github.com/trucomanx/env-bulletjournalround


\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{env-bulletjournalround}[2022/05/21 Package with macros to the math enviroment]


\RequirePackage[most]{tcolorbox}
\RequirePackage{xcolor}
\newcounter{EnvBulletJournalRoundCount}
\usetikzlibrary{shapes.geometric}


% Options
%\DeclareOption{red}{\renewcommand{\wordcolour}{sharelatexcolour}}
\DeclareOption*{\PackageWarning{env-bulletjournalround}{The option ‘\CurrentOption’ is current unknown}}
\ProcessOptions\relax


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Macros 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% defining variable
\newlength{\EnvBulletJournalRoundItemHeight}
\setlength{\EnvBulletJournalRoundItemHeight}{14pt}

\newlength{\EnvBulletJournalRoundItemWidth}
\setlength{\EnvBulletJournalRoundItemWidth}{19pt}

\newlength{\EnvBulletJournalRoundIndent}
\setlength{\EnvBulletJournalRoundIndent}{24pt}

%% Define before space
%\newcommand{\EnvBulletJournalRoundBeforeSpace}{0pt}
%\newcommand{\SetEnvBulletJournalRoundBeforeSpace}[1]{\renewcommand{\EnvBulletJournalRoundBeforeSpace}{#1}}%

%% Define after space
%\newcommand{\EnvBulletJournalRoundAfterSpace}{0pt}
%\newcommand{\SetEnvBulletJournalRoundAfterSpace}[1]{\renewcommand{\EnvBulletJournalRoundAfterSpace}{#1}}%

%% Define FrameTickness
\newcommand{\EnvBulletJournalRoundFrameTickness}{0pt}
\newcommand{\SetEnvBulletJournalRoundFrameTickness}[1]{\renewcommand{\EnvBulletJournalRoundFrameTickness}{#1}}%

%% Define the frame color of enviroment
\newcommand{\EnvBulletJournalRoundFrameColor}{white}
\newcommand{\SetEnvBulletJournalRoundFrameColor}[1]{\renewcommand{\EnvBulletJournalRoundFrameColor}{#1}}%

%% Define the backaground body color
\newcommand{\EnvBulletJournalRoundBackColor}{white}
\newcommand{\SetEnvBulletJournalRoundBackColor}[1]{\renewcommand{\EnvBulletJournalRoundBackColor}{#1}}%

%% Define body Padding
\newcommand{\EnvBulletJournalRoundPadding}{1pt}
\newcommand{\SetEnvBulletJournalRoundPadding}[1]{\renewcommand{\EnvBulletJournalRoundPadding}{#1}}%

%% Define Indent
\newcommand{\SetEnvBulletJournalRoundIndent}[1]%
{%
    \setlength{\EnvBulletJournalRoundIndent}{#1}
}%

%% Define Item font
\newcommand{\EnvBulletJournalRoundItemFont}{\bfseries\itshape}
\newcommand{\SetEnvBulletJournalRoundItemFont}[1]{\renewcommand{\EnvBulletJournalRoundItemFont}{#1}}%

%% Define the Item backaground color
\newcommand{\EnvBulletJournalRoundItemBackColor}{black}%{red!50!black}
\newcommand{\SetEnvBulletJournalRoundItemBackColor}[1]{\renewcommand{\EnvBulletJournalRoundItemBackColor}{#1}}%

%% Define the Item frame color
\newcommand{\EnvBulletJournalRoundItemFrameColor}{black}%{red!50!black}
\newcommand{\SetEnvBulletJournalRoundItemFrameColor}[1]{\renewcommand{\EnvBulletJournalRoundItemFrameColor}{#1}}%

%% Define the Item frame tickness
\newcommand{\EnvBulletJournalRoundItemFrameTickness}{1pt}%{red!50!black}
\newcommand{\SetEnvBulletJournalRoundItemFrameTickness}[1]{\renewcommand{\EnvBulletJournalRoundItemFrameTickness}{#1}}%

%% Define the Item font color
\newcommand{\EnvBulletJournalRoundItemFontColor}{white}
\newcommand{\SetEnvBulletJournalRoundItemFontColor}[1]{\renewcommand{\EnvBulletJournalRoundItemFontColor}{#1}}%


%% Define Item width
\newcommand{\SetEnvBulletJournalRoundItemWidth}[1]%
{
    \setlength{\EnvBulletJournalRoundItemWidth}{#1}
}%

%% Define Item height
\newcommand{\SetEnvBulletJournalRoundItemHeight}[1]%
{%
    \setlength{\EnvBulletJournalRoundItemHeight}{#1}
}%

%% Define Item arco
\newcommand{\EnvBulletJournalRoundItemRound}{7pt}
\newcommand{\SetEnvBulletJournalRoundItemRound}[1]{\renewcommand{\EnvBulletJournalRoundItemRound}{#1}}%



%% Warning: These variables dont have \Set... method

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\newenvironment{bulletjournalround}[1][\EnvBulletJournalRoundItemBackColor]{%
\setcounter{EnvBulletJournalRoundCount}{0}
\begin{tcbitemize}[%
    raster columns=1,    
    nofloat,
    enhanced,
    raster left skip=\EnvBulletJournalRoundIndent,%indent
    sharp corners=all,
    colback=\EnvBulletJournalRoundBackColor,
    colframe=\EnvBulletJournalRoundFrameColor,%No aplica si *rule=0
    toprule=\EnvBulletJournalRoundFrameTickness, bottomrule=\EnvBulletJournalRoundFrameTickness, leftrule=\EnvBulletJournalRoundFrameTickness, rightrule=\EnvBulletJournalRoundFrameTickness,
    boxsep=0pt,
    left=\EnvBulletJournalRoundPadding, right=\EnvBulletJournalRoundPadding, top=\EnvBulletJournalRoundPadding,bottom=\EnvBulletJournalRoundPadding,
    valign=center,
    %before   ={\vspace{\EnvBulletJournalRoundBeforeSpace}},%No aplica
    %after    ={\vspace{\EnvBulletJournalRoundAfterSpace}}, %No aplica
    overlay={% numero en rectangulo redondeado
        \coordinate (X) at ([xshift=-0.5\EnvBulletJournalRoundIndent, yshift=-0.5\EnvBulletJournalRoundItemHeight]frame.north west);
        \node[%
            draw,
            %ellipse,
            rounded corners=\EnvBulletJournalRoundItemRound,
            rotate=0,
            minimum width=\EnvBulletJournalRoundItemWidth,
            minimum height=\EnvBulletJournalRoundItemHeight,
            inner sep=0pt,
            color=\EnvBulletJournalRoundItemFrameColor,
            line width=\EnvBulletJournalRoundItemFrameTickness,
            fill=#1,
            text=\EnvBulletJournalRoundItemFontColor,
            font=\EnvBulletJournalRoundItemFont%\itshape\bfseries
        ] at (X) 
        {\refstepcounter{EnvBulletJournalRoundCount}\normalsize\arabic{EnvBulletJournalRoundCount}};}
    ]%
}%
{\end{tcbitemize}}



