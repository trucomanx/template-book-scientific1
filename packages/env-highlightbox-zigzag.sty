%% source:
%% https://github.com/trucomanx/env-highlightbox-zigzag


\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{env-highlightbox-zigzag}[2022/05/21 Package with macros to the math enviroment]


\RequirePackage[most]{tcolorbox}
\RequirePackage{tikz}
\usetikzlibrary{decorations.pathmorphing}
\RequirePackage{xcolor}

% Options
%\DeclareOption{red}{\renewcommand{\wordcolour}{sharelatexcolour}}
\DeclareOption*{\PackageWarning{env-highlightbox-zigzag}{The option ‘\CurrentOption’ is current unknown}}
\ProcessOptions\relax


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Macros 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% defining variable
%\newlength{\EnvHighlightBoxZigzagLength}
%\setlength{\EnvHighlightBoxZigzagLength}{3mm}

\newlength{\EnvHighlightBoxZigzagAmplitude}
\setlength{\EnvHighlightBoxZigzagAmplitude}{0.5ex}
\newcommand{\SetEnvHighlightBoxZigzagAmplitude}[1]{\setlength{\EnvHighlightBoxZigzagAmplitude}{#1}}%

%%
\newcommand{\EnvHighlightBoxZigzagThickness}{3pt}
\newcommand{\SetEnvHighlightBoxZigzagThickness}[1]{\renewcommand{\EnvHighlightBoxZigzagThickness}{#1}}%

%% Define before space
\newcommand{\EnvHighlightBoxZigzagBeforeSpace}{4pt}
\newcommand{\SetEnvHighlightBoxZigzagBeforeSpace}[1]{\renewcommand{\EnvHighlightBoxZigzagBeforeSpace}{#1}}%

%% Define after space
\newcommand{\EnvHighlightBoxZigzagAfterSpace}{4pt}
\newcommand{\SetEnvHighlightBoxZigzagAfterSpace}[1]{\renewcommand{\EnvHighlightBoxZigzagAfterSpace}{#1}}%

%% Define the frame color of enviroment
\newcommand{\EnvHighlightBoxZigzagFrameColor}{green!40}
\newcommand{\SetEnvHighlightBoxZigzagFrameColor}[1]{\renewcommand{\EnvHighlightBoxZigzagFrameColor}{#1}}%

%% Define the backaground body color
\newcommand{\EnvHighlightBoxZigzagBackColor}{green!5}
\newcommand{\SetEnvHighlightBoxZigzagBackColor}[1]{\renewcommand{\EnvHighlightBoxZigzagBackColor}{#1}}%

%
\newlength{\EnvHighlightBoxZigzagLeftPadding}
\setlength{\EnvHighlightBoxZigzagLeftPadding}{1ex}
\newcommand{\SetEnvHighlightBoxZigzagLeftPadding}[1]%
{%
    \setlength{\EnvHighlightBoxZigzagLeftPadding}{#1}
}%

%
\newlength{\EnvHighlightBoxZigzagRightPadding}
\setlength{\EnvHighlightBoxZigzagRightPadding}{1ex}
\newcommand{\SetEnvHighlightBoxZigzagRightPadding}[1]%
{%
    \setlength{\EnvHighlightBoxZigzagRightPadding}{#1}
}%

%
\newlength{\EnvHighlightBoxZigzagTopPadding}
\setlength{\EnvHighlightBoxZigzagTopPadding}{1ex}
\newcommand{\SetEnvHighlightBoxZigzagTopPadding}[1]%
{%
    \setlength{\EnvHighlightBoxZigzagTopPadding}{#1}
}%

%
\newlength{\EnvHighlightBoxZigzagBottomPadding}
\setlength{\EnvHighlightBoxZigzagBottomPadding}{1ex}
\newcommand{\SetEnvHighlightBoxZigzagBottomPadding}[1]%
{%
    \setlength{\EnvHighlightBoxZigzagBottomPadding}{#1}
}%


%% Define the image of pretitle
%\newcommand{\EnvHighlightBoxZigzagImage}{}
%\newcommand{\SetEnvHighlightBoxZigzagImage}[1]{\renewcommand{\EnvHighlightBoxZigzagImage}{#1}}%





%% Warning: These variables dont have \Set... method




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{comment}
\newtcolorbox{citationbox}
{
  breakable,
  enhanced,
  boxrule = \EnvHighlightBoxZigzagThickness,
  colback  = \EnvHighlightBoxZigzagBackColor,
  colframe = \EnvHighlightBoxZigzagFrameColor,
  arc      = \EnvHighlightBoxZigzagBoxArc,
  before   ={\vspace{\EnvHighlightBoxZigzagBeforeSpace}},
  after    ={\vspace{\EnvHighlightBoxZigzagAfterSpace}},
  left skip= \linewidth-\EnvHighlightBoxZigzagWidth,
  width    = \EnvHighlightBoxZigzagWidth
}
\end{comment}

\newtcolorbox{highlightbox}[1][]{%
tile,
breakable=true,
%
before skip=\EnvHighlightBoxZigzagBeforeSpace,
after skip=\EnvHighlightBoxZigzagAfterSpace,%% Espacion antes y despues del box
%
colback=\EnvHighlightBoxZigzagBackColor,
%colframe=\EnvHighlightBoxZigzagFrameColor,
%
toprule=\EnvHighlightBoxZigzagThickness,
bottomrule=\EnvHighlightBoxZigzagThickness,
%
extras unbroken and first={
borderline north=%
{0.5\EnvHighlightBoxZigzagAmplitude}{\EnvHighlightBoxZigzagAmplitude}%
{\EnvHighlightBoxZigzagFrameColor,decoration={zigzag,amplitude=\EnvHighlightBoxZigzagAmplitude},decorate}},
extras unbroken and last={
borderline south=%
{0.5\EnvHighlightBoxZigzagAmplitude}{\EnvHighlightBoxZigzagAmplitude}%
{\EnvHighlightBoxZigzagFrameColor,decoration={zigzag,amplitude=\EnvHighlightBoxZigzagAmplitude},decorate}},
%
left=\EnvHighlightBoxZigzagLeftPadding,%% espacio interno. Padding.
right=\EnvHighlightBoxZigzagRightPadding,%% espacio interno. Padding.
top=\EnvHighlightBoxZigzagTopPadding,%% espacio interno. Padding.
bottom=\EnvHighlightBoxZigzagBottomPadding,%% espacio interno. Padding.
%
#1
}


