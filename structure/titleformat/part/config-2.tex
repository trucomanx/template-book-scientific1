%\usepackage{ragged2e} % "forçar" um ambiente com justificação nas table contents

%----------------------------------------------------------------------------------------
%	MINI TABLE OF CONTENTS IN PART HEADS
%----------------------------------------------------------------------------------------

% Chapter text styling
\titlecontents{lchapter}[0em] % Indenting
{\addvspace{15pt}\normalsize\bfseries\color{colorDefault}\sloppy} % Spacing and font options for chapters % Acima do título
{\color{colorDefault}\contentslabel[\normalsize\thecontentslabel]{1.25cm}\color{colorDefault}} % Chapter number % Antes do título
{\color{colorDefault}}  % Sem número (título puro) 
{\color{colorDefault}\normalsize\bfseries\;\titlerule*[.5pc]{.}\;\thecontentspage} % Page number % Depois do título

% Section text styling
\titlecontents{lsection}[0em] % Indenting
{\small\sloppy} % Spacing and font options for sections
{\color{black}\contentslabel[\small\thecontentslabel]{1.25cm}\color{black}} % Section number
{}
{\color{black}\small\sffamily\bfseries\,} % Page number % I know, this does nothing, but it does not remove because otherwise the fontsize does not change.

% Subsection text styling
\titlecontents{lsubsection}[.5em] % Indentation
{\normalfont\footnotesize\sloppy} % Font settings
{}
{}
{}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\CmdOfPrintContents}{%
\normalfont
\normalsize
\startcontents[parts]%
\printcontents[parts]{l}{0}{\setcounter{tocdepth}{1}}% lchapter,lsection.lsubsection
}


\newcommand{\TikCodeWithNumberPart}[1]{%
\begin{tikzpicture}[remember picture,overlay]%
\node at (current page.north west){\begin{tikzpicture}[remember picture,overlay]%	
\fill[colorPartPageBackground!20](0cm,0cm) rectangle (\paperwidth,-\paperheight);
\node[anchor=north west] at (2cm,-3.25cm){\color{colorPartPageBackground!40}\fontsize{220}{100}\bfseries\thepart}; % number
%\node[anchor=south east] at (\paperwidth-1cm,-\paperheight+1cm){\parbox[t][][t]{8.5cm}{\printcontents{l}{0}{\setcounter{tocdepth}{1}}}};
\node[anchor=south east] at (\paperwidth-1cm,-\paperheight+1cm){\parbox[t][][t]{8.5cm}{\CmdOfPrintContents}}; % contents
\node[anchor=north east] at (\paperwidth-1.5cm,-3.25cm){\parbox[t][][t]{15cm}{\strut\raggedleft\color{colorDefault}\fontsize{30}{30}\bfseries#1}}; % title text
\end{tikzpicture}};
\end{tikzpicture}%
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\titleformat{\part}[display]%
{\centering\bfseries\fontsize{30pt}{0pt}\selectfont}%formato
{}%etiqueta % {\parttitlename\ Number \thepart}
{30pt}%separacion
{%
\thispagestyle{empty}%
\TikCodeWithNumberPart{#1}%
}% codigo anterior
[]%codigo posterior

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\TikCodeWithoutNumberPart}[1]{%
\begin{tikzpicture}[remember picture,overlay]%
\node at (current page.north west){\begin{tikzpicture}[remember picture,overlay]%	
\fill[colorPartPageBackground!20](0cm,0cm) rectangle (\paperwidth,-\paperheight);
\node[anchor=north east] at (\paperwidth-1.5cm,-3.25cm){\parbox[t][][t]{15cm}{\strut\raggedleft\color{white}\fontsize{30}{30}\bfseries#1}};
\end{tikzpicture}};
\end{tikzpicture}%
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\titleformat{name=\part,numberless}[display]%
{\centering\bfseries\fontsize{30pt}{0pt}\selectfont}%formato
{}%etiqueta
{30pt}%separacion
{%
\thispagestyle{empty}%
\TikCodeWithoutNumberPart{#1}%
}% codigo anterior
[]%codigo posterior

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\titlespacing*{\part}{-10pt}{120pt}{-80pt}%pbk




